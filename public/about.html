<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>About Me - Local Job Finder</title>
  <style>
    :root {
      --accent-color: #6c63ff;
      --home-bg: var(--accent-color);
      --home-hover-bg: #514dcf;
      --secondary-color: #f5f5f5;
    }

    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: var(--secondary-color);
      color: #333;
      padding-top: 80px;
    }

    header {
      position: fixed;
      top: 0;
      width: 100%;
      background: var(--accent-color);
      padding: 20px 40px;
      z-index: 1000;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }

    nav {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 20px;
    }

    nav a {
      color: white;
      text-decoration: none;
      font-size: 1.1rem;
      padding: 10px 20px;
      font-weight: 600;
      cursor: pointer;
      user-select: none;
      white-space: nowrap;
      background: var(--home-bg);
      border-radius: 8px;
      transition: all 0.3s ease;
    }

    nav a:hover {
      background: var(--home-hover-bg);
      text-decoration: none;
      transform: translateY(-2px);
    }

    main {
      max-width: 800px;
      margin: 40px auto;
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 8px 20px rgba(108, 99, 255, 0.1);
    }

    h1 {
      color: var(--accent-color);
      margin-bottom: 20px;
      font-size: 2.2rem;
    }

    .info {
      font-size: 1.1rem;
      margin-bottom: 25px;
      line-height: 1.7;
    }

    .section-title {
      font-size: 1.4rem;
      color: var(--accent-color);
      margin-top: 30px;
      margin-bottom: 12px;
    }

    footer {
      background: #eee;
      padding: 20px;
      text-align: center;
      font-size: 0.95rem;
      color: #555;
    }

    @media (max-width: 600px) {
      header {
        padding: 15px 0;
      }

      nav {
        padding: 0 12px;
      }

      nav a {
        font-size: 1.1rem;
        padding: 8px 16px;
      }

      main {
        margin: 20px;
        padding: 20px;
      }

      h1 {
        font-size: 1.8rem;
      }

      .info {
        font-size: 1rem;
      }
    }
  </style>
</head>
<body>

  <header>
    <nav>
      <a href="/">Home</a>
      <a href="#" onclick="openUserExperience()">User Experience</a>
    </nav>
  </header>

  <main>
    <h1>About Me</h1>

    <div class="info">
      <strong>Name:</strong> Lavish<br />
      <strong>School:</strong> S.A.M. Inter College, Saharanpur<br />
      <strong>District:</strong> Saharanpur<br />
      <strong>Class:</strong> 11th (Science Stream)<br />
      <strong>Interest:</strong> Web Development (Full Stack Developer)
    </div>

    <h2 class="section-title">About This Website</h2>
    <div class="info">
      This website is built to help the people of <strong>Uttar Pradesh</strong> find local jobs based on their <strong>district</strong> and <strong>educational qualification</strong>.<br /><br />

      <strong>Registration:</strong> Users can register on this platform to search or post jobs based on their location and qualifications.<br /><br />

      <strong>Company Form:</strong> Local businesses and companies can submit job openings using the company form.<br /><br />

      <strong>Future Features:</strong><br />
      - Job alerts via Email or WhatsApp<br />
      - Resume/CV builder tool<br />
      - Real-time job application tracking<br />
      - Mobile app version<br />
      - Filters for salary, experience, and job type
    </div>
  </main>

  <footer>
    &copy; 2025 Local Job Finder. All rights reserved.
  </footer>

  <!-- Password Modal -->
  <div id="passwordModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closePasswordModal()">&times;</span>
      <h2>Enter Password</h2>
      <input type="password" id="passwordInput" placeholder="Enter password">
      <button onclick="verifyPassword()">Submit</button>
      <div id="passwordError" class="error-message"></div>
    </div>
  </div>

  <!-- User Experience Modal -->
  <div id="experienceModal" class="modal">
    <div class="modal-content experience-content">
      <span class="close" onclick="closeExperienceModal()">&times;</span>
      <h2>üìä User Experience Data</h2>
      <div id="experienceData">
        <!-- Experience data will be loaded here -->
      </div>
    </div>
  </div>

  <style>
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
    }

    .modal-content {
      background-color: white;
      margin: 10% auto;
      padding: 30px;
      border-radius: 12px;
      width: 90%;
      max-width: 500px;
      text-align: center;
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
    }

    .experience-content {
      max-width: 800px;
      max-height: 80vh;
      overflow-y: auto;
    }

    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      line-height: 1;
    }

    .close:hover {
      color: var(--accent-color);
    }

    #passwordInput {
      width: 100%;
      padding: 12px;
      margin: 15px 0;
      border: 2px solid #eee;
      border-radius: 8px;
      font-size: 16px;
      outline: none;
    }

    #passwordInput:focus {
      border-color: var(--accent-color);
    }

    .modal-content button {
      background: var(--accent-color);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      font-size: 16px;
    }

    .modal-content button:hover {
      background: #514dcf;
    }

    .error-message {
      color: #dc3545;
      margin-top: 10px;
      font-weight: 600;
    }

    .experience-item {
      background: #f8f9fa;
      border-radius: 12px;
      padding: 20px;
      margin: 15px 0;
      border-left: 4px solid var(--accent-color);
      text-align: left;
    }

    .company-name {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--accent-color);
      margin-bottom: 10px;
    }

    .feedback-stats {
      display: flex;
      gap: 20px;
      margin-top: 10px;
    }

    .stat-item {
      display: flex;
      align-items: center;
      gap: 5px;
      padding: 5px 10px;
      border-radius: 6px;
      font-weight: 600;
    }

    .thumbs-up {
      background: #d4edda;
      color: #155724;
    }

    .thumbs-down {
      background: #f8d7da;
      color: #721c24;
    }

    .no-data {
      text-align: center;
      color: #666;
      font-style: italic;
      margin: 30px 0;
    }
  </style>

  <script>
    function openUserExperience() {
      document.getElementById('passwordModal').style.display = 'block';
      document.getElementById('passwordInput').focus();
    }

    function closePasswordModal() {
      document.getElementById('passwordModal').style.display = 'none';
      document.getElementById('passwordInput').value = '';
      document.getElementById('passwordError').textContent = '';
    }

    function closeExperienceModal() {
      document.getElementById('experienceModal').style.display = 'none';
    }

    function verifyPassword() {
      const password = document.getElementById('passwordInput').value;
      const correctPassword = 'lavish@01';
      
      if (password === correctPassword) {
        closePasswordModal();
        loadExperienceData();
        document.getElementById('experienceModal').style.display = 'block';
      } else {
        document.getElementById('passwordError').textContent = 'Incorrect password!';
      }
    }

    function loadExperienceData() {
      // Clear old localStorage data
      localStorage.removeItem('userFeedback');
      localStorage.removeItem('deletedCompanies');
      
      // Get feedback data from MongoDB
      fetch('/api/feedback')
        .then(response => response.json())
        .then(feedbackData => {
          console.log('Feedback from MongoDB:', feedbackData);
          displayExperienceData(feedbackData, []);
        })
        .catch(error => {
          console.error('Error loading feedback:', error);
          displayExperienceData([], []);
        });
    }

    function displayExperienceData(feedbackData, companies) {
      const experienceDataDiv = document.getElementById('experienceData');
      
      if (feedbackData.length === 0) {
        experienceDataDiv.innerHTML = '<div class="no-data">‡§ï‡•ã‡§à user experience data ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§</div>';
        return;
      }

      // Group feedback by type and company
      const companyFeedback = {};
      const otherFeedback = {
        company_deletion: { good: 0, bad: 0, companies: new Set() },
        company_search_not_found: { good: 0, bad: 0 }
      };

      // Process feedback data from MongoDB
      feedbackData.forEach(feedback => {
        if (feedback.type === 'company_deletion') {
          otherFeedback.company_deletion[feedback.rating]++;
          
          // Use company name from MongoDB feedback data
          if (feedback.companyName) {
            otherFeedback.company_deletion.companies.add(feedback.companyName);
            
            if (!companyFeedback[feedback.companyName]) {
              companyFeedback[feedback.companyName] = { good: 0, bad: 0 };
            }
            companyFeedback[feedback.companyName][feedback.rating]++;
          }
        } else if (feedback.type === 'company_search_not_found') {
          otherFeedback.company_search_not_found[feedback.rating]++;
        }
      });

      // Count total companies with experience data
      const totalCompaniesCount = Object.keys(companyFeedback).length;
      const systemExperienceCount = (otherFeedback.company_deletion.good + otherFeedback.company_deletion.bad) + 
                                   (otherFeedback.company_search_not_found.good + otherFeedback.company_search_not_found.bad);

      let html = `
        <div style="background: linear-gradient(135deg, #6a11cb, #2575fc); color: white; padding: 20px; border-radius: 12px; margin-bottom: 20px; text-align: center;">
          <h3 style="margin: 0 0 10px 0;">üìä Experience Summary</h3>
          <div style="display: flex; justify-content: space-around; margin-top: 15px;">
            <div style="background: rgba(255,255,255,0.2); padding: 10px 15px; border-radius: 8px;">
              <div style="font-size: 24px; font-weight: bold;">${totalCompaniesCount}</div>
              <div style="font-size: 12px; opacity: 0.9;">Companies</div>
            </div>
            <div style="background: rgba(255,255,255,0.2); padding: 10px 15px; border-radius: 8px;">
              <div style="font-size: 24px; font-weight: bold;">${feedbackData.length}</div>
              <div style="font-size: 12px; opacity: 0.9;">Total Feedback</div>
            </div>
            <div style="background: rgba(255,255,255,0.2); padding: 10px 15px; border-radius: 8px;">
              <div style="font-size: 24px; font-weight: bold;">${systemExperienceCount}</div>
              <div style="font-size: 12px; opacity: 0.9;">System Experience</div>
            </div>
          </div>
        </div>
      `;

      // Show company-specific feedback
      Object.keys(companyFeedback).forEach(companyName => {
        const stats = companyFeedback[companyName];
        const totalCompanyFeedback = stats.good + stats.bad;
        html += `
          <div class="experience-item">
            <div class="company-name">üè¢ ${companyName}</div>
            <div style="font-size: 14px; color: #666; margin: 5px 0;">
              Total Experience: ${totalCompanyFeedback} feedback received
            </div>
            <div class="feedback-stats">
              <div class="stat-item thumbs-up">
                üëç ${stats.good} Positive
              </div>
              <div class="stat-item thumbs-down">
                üëé ${stats.bad} Negative
              </div>
            </div>
          </div>
        `;
      });

      // Show system feedback
      if (otherFeedback.company_deletion.good > 0 || otherFeedback.company_deletion.bad > 0) {
        html += `
          <div class="experience-item">
            <div class="company-name">üóëÔ∏è Company Deletion Experience</div>
            <div style="font-size: 14px; color: #666; margin: 5px 0;">
              Total Companies Deleted: ${otherFeedback.company_deletion.companies.size} companies
            </div>
            <div class="feedback-stats">
              <div class="stat-item thumbs-up">
                üëç ${otherFeedback.company_deletion.good} Positive
              </div>
              <div class="stat-item thumbs-down">
                üëé ${otherFeedback.company_deletion.bad} Negative
              </div>
            </div>
          </div>
        `;
      }

      if (otherFeedback.company_search_not_found.good > 0 || otherFeedback.company_search_not_found.bad > 0) {
        html += `
          <div class="experience-item">
            <div class="company-name">üîç Company Search Experience</div>
            <div style="font-size: 14px; color: #666; margin: 5px 0;">
              Search attempts: ${otherFeedback.company_search_not_found.good + otherFeedback.company_search_not_found.bad} times
            </div>
            <div class="feedback-stats">
              <div class="stat-item thumbs-up">
                üëç ${otherFeedback.company_search_not_found.good} Positive
              </div>
              <div class="stat-item thumbs-down">
                üëé ${otherFeedback.company_search_not_found.bad} Negative
              </div>
            </div>
          </div>
        `;
      }

      if (html === '') {
        html = '<div class="no-data">‡§ï‡•ã‡§à valid feedback data ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§</div>';
      }

      experienceDataDiv.innerHTML = html;
    }

    // Close modals when clicking outside
    window.onclick = function(event) {
      const passwordModal = document.getElementById('passwordModal');
      const experienceModal = document.getElementById('experienceModal');
      
      if (event.target === passwordModal) {
        closePasswordModal();
      }
      if (event.target === experienceModal) {
        closeExperienceModal();
      }
    }

    // Handle Enter key in password input
    document.addEventListener('DOMContentLoaded', function() {
      document.getElementById('passwordInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          verifyPassword();
        }
      });
    });
  </script>

</body>
</html>