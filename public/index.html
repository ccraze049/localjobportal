<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Local Job Finder</title>
    <style>
      :root {
        --accent-color: #6c63ff;
      }
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: "Segoe UI", sans-serif;
        background: #f5f5f5;
        color: #333;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
      }
      header {
        background: var(--accent-color);
        color: white;
        padding: 20px;
      }
      nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        max-width: 1200px;
        margin: 0 auto;
        position: relative;
      }
      nav a {
        color: white;
        text-decoration: none;
        font-size: 1.1rem;
        padding: 0 12px;
      }
      nav a:nth-child(2) {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
      }
      main {
        flex: 1;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 40px 20px;
      }
      .search-section {
        background: white;
        padding: 30px;
        border-radius: 12px;
        max-width: 480px;
        width: 100%;
        box-shadow: 0 8px 20px rgba(108, 99, 255, 0.2);
        text-align: center;
      }
      .search-section h2 {
        position: relative;
        font-size: 2.4rem;
        margin-bottom: 25px;
        color: var(--accent-color);
        padding-left: 28px;
        text-align: center;
        user-select: none;
      }
      .search-section h2::before {
        content: "üîç";
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        font-size: 2.2rem;
      }
      .form-group {
        margin-bottom: 22px;
        text-align: left;
      }
      label {
        margin-bottom: 8px;
        font-weight: 600;
        font-size: 1.1rem;
        color: #444;
        display: block;
      }
      select {
        width: 100%;
        padding: 9px 12px;
        font-size: 1rem;
        border-radius: 6px;
        border: 1.7px solid #ccc;
        appearance: none;
        background: white
          url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L6 7L11 1' stroke='%236c63ff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E")
          no-repeat right 12px center/12px 8px;
        cursor: pointer;
        transition: border-color 0.3s;
      }
      select:focus {
        border-color: var(--accent-color);
        box-shadow: 0 0 8px var(--accent-color);
        outline: none;
      }
      .search-btn {
        width: 100%;
        padding: 12px 0;
        font-size: 1.2rem;
        background: var(--accent-color);
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        transition: background-color 0.3s;
      }
      .search-btn:hover {
        background: #514dcf;
      }
      footer {
        background: #eee;
        padding: 20px 0;
      }
      .footer-content {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        justify-content: center;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        gap: 20px;
        flex-direction: column;
      }
      .footer-message {
        display: none;
        flex: 1;
        max-width: 600px;
        color: #333;
      }
      .footer-message h3 {
        font-size: 1.8rem;
        color: var(--accent-color);
        margin-bottom: 10px;
      }
      .footer-message p {
        font-size: 1.1rem;
        line-height: 1.6;
      }
      .footer-message span {
        color: var(--accent-color);
        font-weight: 600;
      }
      .footer-message strong {
        font-weight: 600;
      }
      .footer-image-container {
        flex: 1;
        min-width: 300px;
      }
      .footer-image-container img {
        width: 100%;
        height: auto;
        display: block;
        object-fit: cover;
        border-radius: 8px;
        transition: width 0.3s ease;
      }
      @media (max-width: 600px) {
        header {
          padding: 15px;
        }
        nav a:nth-child(2) {
          position: static;
          transform: none;
          margin: 10px 0;
        }
        .search-section {
          padding: 25px 20px;
        }
        .search-section h2 {
          padding-left: 24px;
        }
        .search-section h2::before {
          font-size: 2rem;
          left: 0;
        }
      }
      @media (min-width: 1024px) {
        .footer-content {
          flex-direction: row;
          justify-content: space-between;
          align-items: center;
          margin-right: 10%;
        }
        .footer-message {
          display: block;
          text-align: left;
          margin-left: 20%;
        }
        .footer-image-container {
          max-width: 65%;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <nav>
        <a href="/">Home</a>
        <a href="/companyform">Company Form</a>
        <a href="/aboutme">About Me</a>
      </nav>
    </header>

    <main>
      <section class="search-section">
        <h2>Find Jobs</h2>
        <form id="job-search-form">
          <div class="form-group">
            <label for="district">District</label>
            <select id="district" required>
              <option value="" disabled selected>Select District</option>
              <option>Agra</option>
              <option>Aligarh</option>
              <option>Allahabad (Prayagraj)</option>
              <option>Ambedkar Nagar</option>
              <option>Amethi</option>
              <option>Auraiya</option>
              <option>Azamgarh</option>
              <option>Baghpat</option>
              <option>Bahraich</option>
              <option>Ballia</option>
              <option>Balrampur</option>
              <option>Banda</option>
              <option>Barabanki</option>
              <option>Bareilly</option>
              <option>Basti</option>
              <option>Bhadohi</option>
              <option>Bijnor</option>
              <option>Budaun</option>
              <option>Bulandshahr</option>
              <option>Chandauli</option>
              <option>Chitrakoot</option>
              <option>Deoria</option>
              <option>Etah</option>
              <option>Etawah</option>
              <option>Farrukhabad</option>
              <option>Fatehpur</option>
              <option>Firozabad</option>
              <option>Gautam Buddha Nagar</option>
              <option>Ghaziabad</option>
              <option>Ghazipur</option>
              <option>Gonda</option>
              <option>Gorakhpur</option>
              <option>Hamirpur</option>
              <option>Hapur</option>
              <option>Hardoi</option>
              <option>Hathras</option>
              <option>Jalaun</option>
              <option>Jaunpur</option>
              <option>Jhansi</option>
              <option>Kannauj</option>
              <option>Kanpur Dehat</option>
              <option>Kanpur Nagar</option>
              <option>Kanshiram Nagar (Kasganj)</option>
              <option>Kaushambi</option>
              <option>Kushinagar</option>
              <option>Lakhimpur Kheri</option>
              <option>Lalitpur</option>
              <option>Lucknow</option>
              <option>Maharajganj</option>
              <option>Mahoba</option>
              <option>Mainpuri</option>
              <option>Mathura</option>
              <option>Mau</option>
              <option>Meerut</option>
              <option>Mirzapur</option>
              <option>Moradabad</option>
              <option>Muzaffarnagar</option>
              <option>Pratapgarh</option>
              <option>Raebareli</option>
              <option>Rampur</option>
              <option>Saharanpur</option>
              <option>Sambhal</option>
              <option>Sant Kabir Nagar</option>
              <option>Shahjahanpur</option>
              <option>Shamli</option>
              <option>Shravasti</option>
              <option>Siddharth Nagar</option>
              <option>Sitapur</option>
              <option>Sonebhadra</option>
              <option>Sonipat</option>
              <option>Unnao</option>
              <option>Varanasi</option>
            </select>
          </div>
          <div class="form-group">
            <label for="education">Education Level</label>
            <select id="education" required>
              <option value="" disabled selected>Select Education Level</option>
              <option>8th Pass</option>
              <option>10th Pass</option>
              <option>12th Pass</option>
              <option>ITI</option>
              <option>B.A</option>
            </select>
          </div>
          <button type="submit" class="search-btn">Show Jobs</button>
        </form>
      </section>
    </main>

    <footer>
      <div class="footer-content">
        <div class="footer-image-container">
          <img
            src="https://i.ibb.co/Lz3WZ53y/Employees-looking-for-job-unemployed-people-using-magnifying-glass-searching-vacancy-on-the-search-b.jpg"
            alt="Job Search Image"
          />
        </div>
        <div class="footer-message">
          <h3>Your Local Job Companion</h3>
          <p>
            Empowering <span>local talent</span> by connecting them with the
            right opportunities near them. Find jobs based on
            <strong>your district</strong> and
            <strong>your education level</strong>.
          </p>
        </div>
      </div>
    </footer>
  </body>

  <script>
    document
      .getElementById("job-search-form")
      .addEventListener("submit", async (e) => {
        e.preventDefault();
        const district = document.getElementById("district").value;
        const education = document.getElementById("education").value;

        // Log the values being sent to ensure they are correct
        console.log("Filtering by District:", district);
        console.log("Filtering by Education:", education);

        try {
          const response = await fetch(
            `/api/companies/filter?district=${district}&education=${education}`,
          );
          const filteredCompanies = await response.json();

          if (!response.ok) {
            throw new Error(filteredCompanies.error); // Handle response error
          }

          localStorage.setItem(
            "filteredCompanies",
            JSON.stringify(filteredCompanies),
          );
          window.location.href = "/companies"; // Redirect to companydata page
        } catch (error) {
          alert("Error fetching filtered data: " + error.message);
        }
      });
  </script>
</html>
